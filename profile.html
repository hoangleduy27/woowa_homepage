<!doctype html>
<html lang="en">

<head>
  <title>Title</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS v5.2.1 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mali" rel="stylesheet">
  <link rel="stylesheet" href="profile.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css"
    integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-sm navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="#"><img src="images/woowa_logo.png" alt="logo" height="30px" srcset=""></a>
        <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse"
          data-bs-target="#collapsibleNavId" aria-controls="collapsibleNavId" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavId" style="justify-content: end;">
          <ul class="navbar-nav mt-2 mt-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="#" aria-current="page">Home <span
                  class="visually-hidden">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">Dropdown</a>
              <div class="dropdown-menu" aria-labelledby="dropdownId">
                <a class="dropdown-item" href="#">Action 1</a>
                <a class="dropdown-item" href="#">Action 2</a>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>

  </header>
  <main class="main-article">
    <div class="member-basic-info p-md-3 d-block d-md-flex">
      <div class="mb-3 mb-md-0 me-md-4 d-flex align-middle justify-content-center align-items-center"><img
          class="avt-img" src="images/istockphoto-1371797889-612x612.jpg" alt="Member Avatar" srcset="" height="250"
          width="250"></div>
      <div class="member-info d-md-flex d-block justify-content-between">
        <div class="pb-3 p-md-0">
          <p class="fs-md-2 fs-lg-1 fs-4 fw-bold">Johny Nguyen</p>
          <div class="info-item-list">
            <p class="info-item">
              <i class="fa fa-envelope text-maincolor" aria-hidden="true"></i>
              <span>johnynguyen@gmail.com</span>
            </p>
            <p class="info-item">
              <i class="fa fa-phone-square text-maincolor" aria-hidden="true"></i>
              <span>0123.456.789</span>
            </p>
            <p class="info-item">
              <i class="far fa-calendar-alt text-maincolor"></i>
              <span>20/07/1992</span>
            </p>
          </div>
          <div class="ticket-receive"><i class="far fa-check-circle"></i><span class="title-receive"> Đã nhận được vé</span></div>
        </div>
        <div class="total_invited position-relative">
          <div class="">
            <i class="fas fa-share-alt count-shared-icon"></i>
            <p class="text-white fw-bold">Lượt chia sẻ</p>
          </div>
          <div class="total-shared">
            6
          </div>
        </div>

        <!-- <i class="fab fa-bitcoin color-orange"></i> <span class="color-orange fw-bold fs-4">20.000</span> -->
      </div>
    </div>
    <div class="d-block d-md-flex justify-content-between p-md-3 p-0 below">
      <div class="sidebar my-3 my-md-0 mb-md-0 me-md-4">
        <div class="list-items">
          <div><a style="color: black; text-decoration: none;" href="/update-profile">Thông tin của
            tôi</a></div>
            <div><a style="color: black; text-decoration: none;" href="/change-password">Đổi mật khẩu</a>
            </div>          
            <div>Điểm thưởng</div>
          <div class="active">Mời bạn bè</div>
          <div> <a style="color: red;" href="/logout"> Đăng xuất</a></div>

        </div>
      </div>
      <div class="content-member">
        <div class="mb-4">
          <div class="fw-bold fs-5">Mời bạn bè</div>
          <div class="fw-light">Mời bạn bè để nhận thêm nhiều điểm thưởng hơn!!</div>
        </div>
        <div>
          <div class="pb-2">
            <div class="d-flex align-items-center pb-2"><i class="fas fa-qrcode"></i> <span>Mã giới thiệu</span></div>
            <div class="input-group mb-3">
              <input type="text" class="form-control" value="<%= user.referral_code %>" placeholder="Invite Code"
                aria-describedby="basic-addon2" required readonly>
              <span class="input-group-text cursor-pointer" id="basic-addon2"><i class="fas fa-clone p-0 "
                  style="font-size: 18px !important;" onclick="copyToClipboard()"></i></span>
            </div>
          </div>
          <div>
            <div class="d-flex align-items-center pb-2"><i class="fas fa-link"></i> <span>Đường dẫn giới thiệu</span>
            </div>
            <div class="input-group mb-3">
              <input type="text" class="form-control" value="https://adex.woowa.vn?inviteCode=WW202152"
                placeholder="Invite Link" aria-describedby="basic-addon3">
              <span class="input-group-text cursor-pointer" id="basic-addon3"><i class="fas fa-clone p-0 "
                  style="font-size: 18px !important;"></i></span>
            </div>
          </div>

        </div>
      </div>
    </div>
              <!-- Bootstrap Modal for displaying the alert -->
              <div class="modal fade" id="copyAlertModal" tabindex="-1" role="dialog"
              aria-labelledby="copyAlertModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="copyAlertModalLabel">Referral Code Copied</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          <!-- <span aria-hidden="true">&times;</span> -->
    
                      </div>
                      <div class="modal-body">
                          Your referral code has been copied to the clipboard.
                      </div>
                  </div>
              </div>
          </div>

  </main>
  <footer>
    <!-- place footer here -->
  </footer>
  <!-- Bootstrap JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
    </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
    </script>
</body>

<script>
  function goBackToHome() {
      // Kiểm tra xem trang hiện tại có tham số 'user' hay không
      const urlParams = new URLSearchParams(window.location.search);
      const userParam = urlParams.get('user');

      // Lấy thông tin người dùng đã đăng nhập từ localStorage
      const loggedInUser = localStorage.getItem('loggedInUser');

      // Nếu đã đăng nhập và trang không có tham số 'user'
      if (loggedInUser && !userParam) {
          // Chuyển hướng trang với thêm tham số 'user' vào URL
          window.location.href = window.location.href + (window.location.href.includes('?') ? '&user=' + loggedInUser : '?user=' + loggedInUser);
      }
  }


  function copyToClipboard() {
      const referralCodeInput = document.querySelector(".form-control");
      referralCodeInput.select();

      try {
          const successful = document.execCommand("copy");
          if (successful) {
              // Show the Bootstrap modal to indicate the copy success
              $("#copyAlertModal").modal("show");
          } else {
              // Show a fallback alert if modal is not supported
              alert("Copy failed. Please try again.");
          }
      } catch (err) {
          alert("Copy to clipboard is not supported by your browser.");
      }
  }


  function formatDate(dateString) {
      if (!dateString) return '';

      const date = new Date(dateString);
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');

      return `${year}-${month}-${day}`;
  }

  // Keep the rest of your code inside the $(document).ready() function
  $(document).ready(function () {
      // Your existing code here...
  });

</script>
</html>